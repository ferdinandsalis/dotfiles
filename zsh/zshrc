#!/usr/bin/env zsh
# Minimal zsh fallback config (primary shell is Fish)

# History
HISTSIZE=10000
SAVEHIST=10000
HISTFILE=~/.zsh_history
setopt SHARE_HISTORY HIST_IGNORE_ALL_DUPS HIST_REDUCE_BLANKS

# Completion
autoload -U compinit && compinit
zstyle ':completion:*' menu select

# Environment
export EDITOR='hx'
export VISUAL='hx'
export PAGER='less'
export LESS='-R'
export RIPGREP_CONFIG_PATH="$HOME/.ripgreprc"
export GPG_TTY=$(tty)

# Path
export PATH="/opt/homebrew/bin:/opt/homebrew/sbin:$HOME/.local/bin:$HOME/.cargo/bin:$PATH"

# Tool initialization
eval "$(/opt/homebrew/bin/brew shellenv)"
command -v mise >/dev/null && eval "$(mise activate zsh)"
command -v zoxide >/dev/null && eval "$(zoxide init zsh)"
command -v fzf >/dev/null && eval "$(fzf --zsh)"

# Aliases
alias ls='eza --icons --group-directories-first'
alias ll='eza -la --icons --group-directories-first'
alias la='eza -a --icons --group-directories-first'
alias lt='eza --tree --icons'
alias cat='bat'
alias grep='rg'
alias find='fd'
alias vim='hx'
alias vi='hx'

alias g='git'
alias gs='git st'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git pull'
alias gd='git diff'
alias gco='git checkout'
alias glog='git log --oneline --graph --decorate'

alias ..='cd ..'
alias ...='cd ../..'

# Prompt
PROMPT='%F{cyan}%~%f %F{yellow}‚ùØ%f '

# Local overrides
[ -f ~/.zshrc.local ] && source ~/.zshrc.local
